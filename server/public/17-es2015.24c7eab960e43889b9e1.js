(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{uwBG:function(t,e,n){"use strict";n.r(e);var i=n("ofXK"),o=n("3Pt+"),s=n("TEn/"),r=n("tyNb"),a=n("mrSG"),l=n("NIW7"),c=n("VOof"),b=n("w9U0"),d=n("lNB8"),u=n("fXoL"),g=n("qP/N");const h=function(t){return["/designer",t]};function p(t,e){if(1&t){const t=u.Nb();u.Mb(0,"ion-item-sliding"),u.Mb(1,"ion-item",6),u.Mb(2,"ion-label"),u.Mb(3,"strong"),u.lc(4),u.Lb(),u.Kb(5,"br"),u.Mb(6,"strong"),u.lc(7,"Creado: "),u.Lb(),u.lc(8),u.Lb(),u.Lb(),u.Mb(9,"ion-item-options",7),u.Mb(10,"ion-item-option",4),u.Ub("click",(function(){u.hc(t);const n=e.$implicit;return u.Wb().deleteDesign(n)})),u.Kb(11,"ion-icon",8),u.Lb(),u.Lb(),u.Lb()}if(2&t){const t=e.$implicit,n=u.Wb();u.zb(1),u.cc("routerLink",u.fc(4,h,t._id)),u.zb(3),u.mc(t.name),u.zb(4),u.nc(" ",t.dateCreated," "),u.zb(2),u.cc("color",n.color)}}const m=[{path:"",component:(()=>{class t{constructor(t,e,n,i,o,s){this.router=t,this.apiEntrena=e,this.storage=n,this.toasCtrl=i,this.alertCtrl=o,this.dataCompany=s,this.listDesigner=[],this.text="",this.color="",this.dataCompany.$color.subscribe(t=>{this.color=t})}ngOnInit(){}ionViewWillEnter(){this.ListDesigners()}ListDesigners(){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.storage.getLogin();t&&this.apiEntrena.readDesignersAll(t[0].token,"USER_ENTRENA"===t[0].data.role?t[0].data.parentAdmin:"").subscribe(t=>{"ok"===t.status?this.listDesigner=t.response:this.toasCtrl.newCreatedToast("Could not create design, please try again later",!1)},t=>{this.toasCtrl.newCreatedToast("Could not create design, please try again later",!1)})}))}newDesigner(){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.storage.getLogin();t&&this.apiEntrena.createDesigner(t[0].token).subscribe(t=>{"ok"===t.status?this.router.navigate(["/designer",t.response._id]):this.toasCtrl.newCreatedToast("Could not create design, please try again later",!1)},t=>{this.toasCtrl.newCreatedToast("Could not create design, please try again later",!1)})}))}deleteDesign(t){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.alertCtrl.create({header:"Esta seguro de eliminar este dise\xf1o ?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:()=>Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.storage.getLogin();e&&this.apiEntrena.deleteDesigner(e[0].token,t._id).subscribe(t=>{console.log(t,"eliminando"),"ok"===t.status?(this.toasCtrl.newCreatedToast("Modulo eliminado de la lista",!0),this.ListDesigners()):this.toasCtrl.newCreatedToast("No se pudo eliminar el modulo, intentelo mas tarde",!1)},t=>{this.toasCtrl.newCreatedToast("No se pudo eliminar el modulo, intentelo mas tarde",!1)})}))}]});yield e.present()}))}changeText(t){this.text=t.detail.value}}return t.\u0275fac=function(e){return new(e||t)(u.Jb(r.f),u.Jb(l.a),u.Jb(c.a),u.Jb(b.a),u.Jb(s.a),u.Jb(d.a))},t.\u0275cmp=u.Db({type:t,selectors:[["app-designer-list"]],decls:12,vars:7,consts:[[3,"color"],["mode","ios","placeholder","Buscar Modulo",3,"ionChange"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"color","click"],["name","add"],[3,"routerLink"],["side","end"],["name","trash","slot","icon-only"]],template:function(t,e){1&t&&(u.Mb(0,"ion-header"),u.Mb(1,"ion-toolbar",0),u.Mb(2,"ion-title"),u.lc(3,"Designer List"),u.Lb(),u.Lb(),u.Lb(),u.Mb(4,"ion-content"),u.Mb(5,"ion-searchbar",1),u.Ub("ionChange",(function(t){return e.changeText(t)})),u.Lb(),u.Mb(6,"ion-list"),u.kc(7,p,12,6,"ion-item-sliding",2),u.Xb(8,"search"),u.Lb(),u.Mb(9,"ion-fab",3),u.Mb(10,"ion-fab-button",4),u.Ub("click",(function(){return e.newDesigner()})),u.Kb(11,"ion-icon",5),u.Lb(),u.Lb(),u.Lb()),2&t&&(u.zb(1),u.cc("color",e.color),u.zb(6),u.cc("ngForOf",u.Zb(8,3,e.listDesigner,e.text,"name")),u.zb(3),u.cc("color",e.color))},directives:[s.s,s.T,s.S,s.l,s.K,s.fb,s.B,i.h,s.n,s.o,s.t,s.z,s.v,s.db,r.g,s.A,s.y,s.x],pipes:[g.a],styles:[""]}),t})()}];let f=(()=>{class t{}return t.\u0275mod=u.Hb({type:t}),t.\u0275inj=u.Gb({factory:function(e){return new(e||t)},imports:[[r.h.forChild(m)],r.h]}),t})();var C=n("BQi/");n.d(e,"DesignerListPageModule",(function(){return L}));let L=(()=>{class t{}return t.\u0275mod=u.Hb({type:t}),t.\u0275inj=u.Gb({factory:function(e){return new(e||t)},imports:[[i.b,o.a,s.U,f,C.a]]}),t})()}}]);