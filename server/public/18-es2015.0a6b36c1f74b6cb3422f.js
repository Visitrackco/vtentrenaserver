(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{euV6:function(e,i,t){"use strict";t.r(i);var n=t("ofXK"),o=t("3Pt+"),c=t("TEn/"),l=t("tyNb"),a=t("mrSG"),b=t("NIW7"),s=t("w9U0"),r=t("VOof"),d=t("tk/3"),u=t("lJxs"),g=t("JIr8"),p=t("LRne"),h=t("fXoL");const f=["fileUpload"];function v(e,i){if(1&e){const e=h.Nb();h.Mb(0,"ion-item",7),h.Mb(1,"ion-input",10),h.Ub("ngModelChange",(function(i){return h.hc(e),h.Wb(2).values.value=i})),h.Lb(),h.Lb()}if(2&e){const e=h.Wb(2);h.zb(1),h.cc("ngModel",e.values.value)}}function M(e,i){if(1&e){const e=h.Nb();h.Mb(0,"ion-item",7),h.Mb(1,"ion-textarea",10),h.Ub("ngModelChange",(function(i){return h.hc(e),h.Wb(2).values.value=i})),h.Lb(),h.Lb()}if(2&e){const e=h.Wb(2);h.zb(1),h.cc("ngModel",e.values.value)}}function m(e,i){if(1&e){const e=h.Nb();h.Mb(0,"ion-list"),h.Mb(1,"strong"),h.lc(2,"Titulo del campo"),h.Lb(),h.Kb(3,"br"),h.Mb(4,"ion-item",7),h.Mb(5,"ion-input",8),h.Ub("ngModelChange",(function(i){return h.hc(e),h.Wb().values.title=i})),h.Lb(),h.Lb(),h.Mb(6,"strong"),h.lc(7,"Contenido del campo"),h.Lb(),h.Kb(8,"br"),h.kc(9,v,2,1,"ion-item",9),h.kc(10,M,2,1,"ion-item",9),h.Lb()}if(2&e){const e=h.Wb();h.zb(5),h.cc("ngModel",e.values.title),h.zb(4),h.cc("ngIf","textline"===e.data.type),h.zb(1),h.cc("ngIf","textarea"===e.data.type)}}function L(e,i){if(1&e){const e=h.Nb();h.Mb(0,"ion-list"),h.Mb(1,"ion-item",15),h.Mb(2,"ion-buttons",16),h.Mb(3,"ion-button",17),h.Ub("click",(function(){h.hc(e);const t=i.index;return h.Wb(2).deleteOpt(t)})),h.Kb(4,"ion-icon",18),h.Lb(),h.Lb(),h.Lb(),h.Mb(5,"ion-item",7),h.Mb(6,"ion-input",19),h.Ub("ngModelChange",(function(t){return h.hc(e),i.$implicit.text=t})),h.Lb(),h.Lb(),h.Mb(7,"ion-item",7),h.Mb(8,"ion-input",20),h.Ub("ngModelChange",(function(t){return h.hc(e),i.$implicit.value=t})),h.Lb(),h.Lb(),h.Kb(9,"div",21),h.Lb()}if(2&e){const e=i.$implicit;h.zb(6),h.cc("ngModel",e.text),h.zb(2),h.cc("ngModel",e.value)}}function k(e,i){if(1&e){const e=h.Nb();h.Mb(0,"div",11),h.Mb(1,"ion-list"),h.Mb(2,"strong"),h.lc(3,"Titulo del campo"),h.Lb(),h.Kb(4,"br"),h.Mb(5,"ion-item",7),h.Mb(6,"ion-input",8),h.Ub("ngModelChange",(function(i){return h.hc(e),h.Wb().values.title=i})),h.Lb(),h.Lb(),h.Lb(),h.Mb(7,"strong"),h.lc(8,"Opciones"),h.Lb(),h.kc(9,L,10,2,"ion-list",12),h.Kb(10,"div",13),h.Mb(11,"ion-button",14),h.Ub("click",(function(){return h.hc(e),h.Wb().addOpt()})),h.lc(12,"Agregar Opci\xf3n"),h.Lb(),h.Lb()}if(2&e){const e=h.Wb();h.zb(6),h.cc("ngModel",e.values.title),h.zb(3),h.cc("ngForOf",e.values.opts)}}function y(e,i){if(1&e){const e=h.Nb();h.Mb(0,"ion-list"),h.Mb(1,"ion-item",15),h.Mb(2,"ion-buttons",16),h.Mb(3,"ion-button",17),h.Ub("click",(function(){h.hc(e);const t=i.index;return h.Wb(2).deleteOpt(t)})),h.Kb(4,"ion-icon",18),h.Lb(),h.Lb(),h.Lb(),h.Mb(5,"ion-item",7),h.Mb(6,"ion-input",19),h.Ub("ngModelChange",(function(t){return h.hc(e),i.$implicit.text=t})),h.Lb(),h.Lb(),h.Mb(7,"ion-item",7),h.Mb(8,"ion-input",20),h.Ub("ngModelChange",(function(t){return h.hc(e),i.$implicit.value=t})),h.Lb(),h.Lb(),h.Kb(9,"div",21),h.Lb()}if(2&e){const e=i.$implicit;h.zb(6),h.cc("ngModel",e.text),h.zb(2),h.cc("ngModel",e.value)}}function C(e,i){if(1&e){const e=h.Nb();h.Mb(0,"div",11),h.Mb(1,"ion-list"),h.Mb(2,"strong"),h.lc(3,"Titulo del campo"),h.Lb(),h.Kb(4,"br"),h.Mb(5,"ion-item",7),h.Mb(6,"ion-input",8),h.Ub("ngModelChange",(function(i){return h.hc(e),h.Wb().values.title=i})),h.Lb(),h.Lb(),h.Lb(),h.Mb(7,"strong"),h.lc(8,"Opciones"),h.Lb(),h.kc(9,y,10,2,"ion-list",12),h.Kb(10,"div",13),h.Mb(11,"ion-button",14),h.Ub("click",(function(){return h.hc(e),h.Wb().addOpt()})),h.lc(12,"Agregar Opci\xf3n"),h.Lb(),h.Lb()}if(2&e){const e=h.Wb();h.zb(6),h.cc("ngModel",e.values.title),h.zb(3),h.cc("ngForOf",e.values.opts)}}function O(e,i){1&e&&(h.Mb(0,"strong"),h.lc(1,"Imagen Actual"),h.Lb())}function z(e,i){if(1&e&&(h.Mb(0,"ion-list"),h.Mb(1,"ion-item",13),h.Mb(2,"ion-label"),h.lc(3),h.Kb(4,"br"),h.Kb(5,"img",26),h.Lb(),h.Lb(),h.Lb()),2&e){const e=h.Wb(2);h.zb(3),h.nc("",e.values.name," "),h.zb(2),h.ec("src","http://localhost:3000/uploads/Entrenamientos/",e.values.src,"",h.ic)}}function x(e,i){if(1&e){const e=h.Nb();h.Mb(0,"ion-list"),h.Kb(1,"ion-item-divider",27),h.Mb(2,"ion-item",13),h.Mb(3,"ion-label"),h.Mb(4,"strong"),h.lc(5,"Actualizar imagen por:"),h.Lb(),h.Kb(6,"br"),h.lc(7),h.Lb(),h.Mb(8,"ion-buttons",16),h.Mb(9,"ion-button",17),h.Ub("click",(function(){return h.hc(e),h.Wb(2).deletedFile()})),h.Kb(10,"ion-icon",18),h.Lb(),h.Lb(),h.Lb(),h.Lb()}if(2&e){const e=i.$implicit;h.zb(7),h.oc(" ",e.data.name," - ",e.data.type," ")}}function N(e,i){if(1&e){const e=h.Nb();h.Mb(0,"div"),h.Mb(1,"div",22),h.Mb(2,"ion-list"),h.Mb(3,"strong"),h.lc(4,"Titulo de la imagen"),h.Lb(),h.Kb(5,"br"),h.Mb(6,"ion-item",7),h.Mb(7,"ion-input",8),h.Ub("ngModelChange",(function(i){return h.hc(e),h.Wb().values.title=i})),h.Lb(),h.Lb(),h.Lb(),h.kc(8,O,2,0,"strong",2),h.kc(9,z,6,2,"ion-list",2),h.kc(10,x,11,2,"ion-list",12),h.Mb(11,"div"),h.Mb(12,"ion-button",23),h.Ub("click",(function(){return h.hc(e),h.Wb().onClick()})),h.Mb(13,"div"),h.lc(14,"Subir Imagen"),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Kb(15,"input",24,25),h.Lb()}if(2&e){const e=h.Wb();h.zb(7),h.cc("ngModel",e.values.title),h.zb(1),h.cc("ngIf",""!==e.values.src),h.zb(1),h.cc("ngIf",""!==e.values.src),h.zb(1),h.cc("ngForOf",e.files)}}function w(e,i){1&e&&(h.Mb(0,"strong"),h.lc(1,"Video Actual"),h.Lb())}function S(e,i){if(1&e&&(h.Mb(0,"ion-list"),h.Mb(1,"ion-item",13),h.Mb(2,"ion-label"),h.lc(3),h.Kb(4,"br"),h.Kb(5,"video",29),h.Lb(),h.Lb(),h.Lb()),2&e){const e=h.Wb(2);h.zb(3),h.nc("",e.values.name," "),h.zb(2),h.ec("src","http://localhost:3000/uploads/Entrenamientos/",e.values.src,"",h.ic)}}function W(e,i){if(1&e){const e=h.Nb();h.Mb(0,"ion-list"),h.Kb(1,"ion-item-divider",27),h.Mb(2,"ion-item",13),h.Mb(3,"ion-label"),h.Mb(4,"strong"),h.lc(5,"Actualizar Video por:"),h.Lb(),h.Kb(6,"br"),h.lc(7),h.Lb(),h.Mb(8,"ion-buttons",16),h.Mb(9,"ion-button",17),h.Ub("click",(function(){return h.hc(e),h.Wb(2).deletedFile()})),h.Kb(10,"ion-icon",18),h.Lb(),h.Lb(),h.Lb(),h.Lb()}if(2&e){const e=i.$implicit;h.zb(7),h.oc(" ",e.data.name," - ",e.data.type," ")}}function J(e,i){if(1&e){const e=h.Nb();h.Mb(0,"div"),h.Mb(1,"div",22),h.Mb(2,"ion-list"),h.Mb(3,"strong"),h.lc(4,"Titulo del Video"),h.Lb(),h.Kb(5,"br"),h.Mb(6,"ion-item",7),h.Mb(7,"ion-input",8),h.Ub("ngModelChange",(function(i){return h.hc(e),h.Wb().values.title=i})),h.Lb(),h.Lb(),h.Lb(),h.kc(8,w,2,0,"strong",2),h.kc(9,S,6,2,"ion-list",2),h.kc(10,W,11,2,"ion-list",12),h.Mb(11,"div"),h.Mb(12,"ion-button",23),h.Ub("click",(function(){return h.hc(e),h.Wb().onClick()})),h.Mb(13,"div"),h.lc(14,"Subir Video"),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Kb(15,"input",28,25),h.Lb()}if(2&e){const e=h.Wb();h.zb(7),h.cc("ngModel",e.values.title),h.zb(1),h.cc("ngIf",""!==e.values.src),h.zb(1),h.cc("ngIf",""!==e.values.src),h.zb(1),h.cc("ngForOf",e.files)}}function I(e,i){1&e&&(h.Mb(0,"strong"),h.lc(1,"Video Actual"),h.Lb())}function D(e,i){if(1&e&&(h.Mb(0,"ion-list"),h.Mb(1,"ion-item",13),h.Mb(2,"ion-label"),h.lc(3),h.Kb(4,"br"),h.Mb(5,"ion-chip"),h.lc(6),h.Lb(),h.Lb(),h.Lb(),h.Lb()),2&e){const e=h.Wb(2);h.zb(3),h.nc("",e.values.name," "),h.zb(3),h.mc(e.values.src)}}function U(e,i){if(1&e){const e=h.Nb();h.Mb(0,"ion-list"),h.Kb(1,"ion-item-divider",27),h.Mb(2,"ion-item",13),h.Mb(3,"ion-label"),h.Mb(4,"strong"),h.lc(5,"Actualizar Archivo por:"),h.Lb(),h.Kb(6,"br"),h.lc(7),h.Lb(),h.Mb(8,"ion-buttons",16),h.Mb(9,"ion-button",17),h.Ub("click",(function(){return h.hc(e),h.Wb(2).deletedFile()})),h.Kb(10,"ion-icon",18),h.Lb(),h.Lb(),h.Lb(),h.Lb()}if(2&e){const e=i.$implicit;h.zb(7),h.oc(" ",e.data.name," - ",e.data.type," ")}}function K(e,i){if(1&e){const e=h.Nb();h.Mb(0,"div"),h.Mb(1,"div",22),h.Mb(2,"ion-list"),h.Mb(3,"strong"),h.lc(4,"Titulo del Video"),h.Lb(),h.Kb(5,"br"),h.Mb(6,"ion-item",7),h.Mb(7,"ion-input",8),h.Ub("ngModelChange",(function(i){return h.hc(e),h.Wb().values.title=i})),h.Lb(),h.Lb(),h.Lb(),h.kc(8,I,2,0,"strong",2),h.kc(9,D,7,2,"ion-list",2),h.kc(10,U,11,2,"ion-list",12),h.Mb(11,"div"),h.Mb(12,"ion-button",23),h.Ub("click",(function(){return h.hc(e),h.Wb().onClick()})),h.Mb(13,"div"),h.lc(14,"Subir Archivo"),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Kb(15,"input",30,25),h.Lb()}if(2&e){const e=h.Wb();h.zb(7),h.cc("ngModel",e.values.title),h.zb(1),h.cc("ngIf",""!==e.values.src),h.zb(1),h.cc("ngIf",""!==e.values.src),h.zb(1),h.cc("ngForOf",e.files)}}let P=(()=>{class e{constructor(e,i,t,n){this.modalCtrl=e,this.storage=i,this.apiEntrena=t,this.toasCtrl=n,this.titleInput="",this.values={},this.files=[],this.filesRendering=[]}ngOnInit(){}ionViewWillEnter(){this.titleInput=this.data.type,this.values=this.data.values,console.log(this.values)}addOpt(){this.values.opts.push({text:"",value:"",checked:!1})}deleteOpt(e){this.values.opts.splice(e,1)}uploadFile(e){return Object(a.a)(this,void 0,void 0,(function*(){const i=yield this.storage.getLogin();if(i){const t=new FormData;t.append("file",e.data),e.inProgress=!0,console.log(i),this.apiEntrena.upload(t,i[0].token).pipe(Object(u.a)(i=>{switch(console.log("Holaa"),i.type){case d.c.UploadProgress:e.progress=Math.round(1*i.loaded/i.total);break;case d.c.Response:return i}}),Object(g.a)(i=>(e.inProgress=!1,Object(p.a)(`${e.data.name} upload failed.`)))).subscribe(i=>{"object"==typeof i&&(console.log(i.body," Respuesta"),"ok"===i.body.status?(this.values.src=i.body.response,this.values.mime=e.data.type,this.values.name=e.data.name,this.saveJson()):this.toasCtrl.newCreatedToast("Upload failed",!1))})}}))}uploadFiles(){this.fileUpload.nativeElement.value="",this.files.forEach(e=>{this.uploadFile(e)})}onClick(){const e=this.fileUpload.nativeElement;e.onchange=()=>{for(let i=0;i<e.files.length;i++){const t=e.files[i];console.log(t,t.name),this.files.push({data:t,inProgress:!1,progress:0})}},e.click()}deletedFile(){this.files=[]}save(){"image"===this.data.type||"video"===this.data.type||"file"===this.data.type?this.uploadFiles():this.saveJson()}saveJson(){this.modalCtrl.dismiss({reload:!0,info:{values:this.values,page:this.idpage}})}close(){this.modalCtrl.dismiss({})}}return e.\u0275fac=function(i){return new(i||e)(h.Jb(c.Y),h.Jb(r.a),h.Jb(b.a),h.Jb(s.a))},e.\u0275cmp=h.Db({type:e,selectors:[["app-designer"]],viewQuery:function(e,i){var t;1&e&&h.pc(f,!0),2&e&&h.gc(t=h.Vb())&&(i.fileUpload=t.first)},inputs:{data:"data",idpage:"idpage"},decls:21,vars:7,consts:[["color","users"],[1,"ion-padding"],[4,"ngIf"],["class","input",4,"ngIf"],["size","6"],["mode","ios","expand","block","color","light",3,"click"],["mode","ios","expand","block","color","primary",3,"click"],["lines","none",1,"marginBottom","border"],["type","text","placeholder","Titulo del campo",3,"ngModel","ngModelChange"],["lines","none","class","marginBottom border",4,"ngIf"],["type","text","placeholder","Contenido del campo",3,"ngModel","ngModelChange"],[1,"input"],[4,"ngFor","ngForOf"],[1,"marginBottom"],["color","secondary","mode","ios",3,"click"],["lines","none",1,""],["slot","end"],[3,"click"],["name","trash","color","danger","slot","icon-only"],["type","text","placeholder","Text",3,"ngModel","ngModelChange"],["type","text","placeholder","Value",3,"ngModel","ngModelChange"],[1,"border"],[2,"margin-top","10px"],["expand","block","mode","ios","color","tertiary",1,"myButton",3,"click"],["type","file","id","fileUpload","name","file","accept","image/*",2,"display","none"],["fileUpload",""],["alt","",3,"src"],["color","warning"],["type","file","id","fileUpload","name","file","accept","video/*",2,"display","none"],["controls","",3,"src"],["type","file","id","fileUpload","name","file",2,"display","none"]],template:function(e,i){1&e&&(h.Mb(0,"ion-header"),h.Mb(1,"ion-toolbar",0),h.Mb(2,"ion-title"),h.lc(3),h.Lb(),h.Lb(),h.Lb(),h.Mb(4,"ion-content",1),h.kc(5,m,11,3,"ion-list",2),h.kc(6,k,13,2,"div",3),h.kc(7,C,13,2,"div",3),h.kc(8,N,17,4,"div",2),h.kc(9,J,17,4,"div",2),h.kc(10,K,17,4,"div",2),h.Lb(),h.Mb(11,"ion-footer"),h.Mb(12,"ion-toolbar"),h.Mb(13,"ion-grid"),h.Mb(14,"ion-row"),h.Mb(15,"ion-col",4),h.Mb(16,"ion-button",5),h.Ub("click",(function(){return i.close()})),h.lc(17,"cancelar"),h.Lb(),h.Lb(),h.Mb(18,"ion-col",4),h.Mb(19,"ion-button",6),h.Ub("click",(function(){return i.save()})),h.lc(20,"Guardar"),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb()),2&e&&(h.zb(3),h.mc(i.titleInput),h.zb(2),h.cc("ngIf","textline"===i.data.type||"textarea"===i.data.type),h.zb(1),h.cc("ngIf","radio"===i.data.type),h.zb(1),h.cc("ngIf","checkbox"===i.data.type),h.zb(1),h.cc("ngIf","image"===i.data.type),h.zb(1),h.cc("ngIf","video"===i.data.type),h.zb(1),h.cc("ngIf","file"===i.data.type))},directives:[c.s,c.T,c.S,c.l,n.i,c.q,c.r,c.J,c.k,c.g,c.B,c.v,c.u,c.fb,o.c,o.d,c.R,n.h,c.h,c.t,c.A,c.w,c.j],styles:[".marginBottom[_ngcontent-%COMP%]{margin-bottom:10px}.border[_ngcontent-%COMP%]{border:1px solid rgba(3,3,3,.1)}video[_ngcontent-%COMP%]{max-width:100%;width:auto}"]}),e})();var A=t("lNB8");const E=["slide"];function $(e,i){if(1&e&&(h.Mb(0,"ion-label"),h.lc(1),h.Lb()),2&e){const e=h.Wb().$implicit;h.zb(1),h.mc(e.type)}}function T(e,i){if(1&e&&(h.Mb(0,"div",40),h.Mb(1,"strong",41),h.lc(2),h.Lb(),h.Kb(3,"br"),h.Kb(4,"ion-input",42),h.Lb()),2&e){const e=h.Wb().$implicit;h.zb(2),h.mc(e.values.title),h.zb(2),h.cc("value",e.values.value)}}function F(e,i){if(1&e&&(h.Mb(0,"div",40),h.Mb(1,"strong",41),h.lc(2),h.Lb(),h.Kb(3,"br"),h.Kb(4,"ion-textarea",42),h.Lb()),2&e){const e=h.Wb().$implicit;h.zb(2),h.mc(e.values.title),h.zb(2),h.cc("value",e.values.value)}}function j(e,i){if(1&e&&(h.Mb(0,"div"),h.Mb(1,"strong"),h.lc(2),h.Lb(),h.lc(3),h.Lb()),2&e){const e=i.$implicit,t=i.index;h.zb(2),h.nc(" ",t+1,""),h.zb(1),h.nc(" ",e.text," ")}}function B(e,i){if(1&e&&(h.Mb(0,"div",40),h.Mb(1,"strong",41),h.lc(2),h.Lb(),h.Kb(3,"br"),h.kc(4,j,4,2,"div",14),h.Lb()),2&e){const e=h.Wb().$implicit;h.zb(2),h.mc(e.values.title),h.zb(2),h.cc("ngForOf",e.values.opts)}}function R(e,i){if(1&e&&(h.Mb(0,"div",40),h.Mb(1,"strong",41),h.lc(2),h.Lb(),h.Kb(3,"br"),h.Kb(4,"img",43),h.Lb()),2&e){const e=h.Wb().$implicit;h.zb(2),h.mc(e.values.title),h.zb(2),h.ec("src","https://www.vtentrena.com/app/uploads/Entrenamientos/",e.values.src,"",h.ic)}}function _(e,i){if(1&e&&(h.Mb(0,"div",40),h.Mb(1,"strong",41),h.lc(2),h.Lb(),h.Kb(3,"br"),h.Mb(4,"ion-chip",44),h.lc(5),h.Lb(),h.Lb()),2&e){const e=h.Wb().$implicit;h.zb(2),h.mc(e.values.title),h.zb(3),h.nc(" ",e.values.src,"")}}function V(e,i){if(1&e&&(h.Mb(0,"div",40),h.Mb(1,"strong",41),h.lc(2),h.Lb(),h.Kb(3,"br"),h.Kb(4,"video",43),h.Lb()),2&e){const e=h.Wb().$implicit;h.zb(2),h.mc(e.values.title),h.zb(2),h.ec("src","https://www.vtentrena.com/app/uploads/Entrenamientos/",e.values.src,"",h.ic)}}function q(e,i){if(1&e){const e=h.Nb();h.Mb(0,"div"),h.Mb(1,"div",36),h.Kb(2,"ion-reorder"),h.Mb(3,"ion-buttons"),h.Mb(4,"ion-button",37),h.Ub("click",(function(){h.hc(e);const t=i.index,n=h.Wb().index;return h.Wb(2).deleteChild(n,t)})),h.Kb(5,"ion-icon",38),h.Lb(),h.Lb(),h.Lb(),h.Mb(6,"ion-item",37),h.Ub("click",(function(){h.hc(e);const t=i.$implicit,n=h.Wb().$implicit;return h.Wb(2).modalChangeInput(t,n.id)})),h.kc(7,$,2,1,"ion-label",7),h.kc(8,T,5,2,"div",39),h.kc(9,F,5,2,"div",39),h.kc(10,B,5,2,"div",39),h.kc(11,R,5,2,"div",39),h.kc(12,_,6,2,"div",39),h.kc(13,V,5,2,"div",39),h.Lb(),h.Lb()}if(2&e){const e=i.$implicit,t=h.Wb(3);h.zb(5),h.cc("color",t.color),h.zb(2),h.cc("ngIf",""===e.values.title),h.zb(1),h.cc("ngIf",""!==e.values.title&&"textline"===e.type),h.zb(1),h.cc("ngIf",""!==e.values.title&&"textarea"===e.type),h.zb(1),h.cc("ngIf",""!==e.values.title&&("radio"===e.type||"checkbox"===e.type)),h.zb(1),h.cc("ngIf",""!==e.values.title&&"image"===e.type),h.zb(1),h.cc("ngIf",""!==e.values.title&&"file"===e.type),h.zb(1),h.cc("ngIf",""!==e.values.title&&"video"===e.type)}}function G(e,i){if(1&e){const e=h.Nb();h.Mb(0,"ion-slide"),h.Mb(1,"div",15),h.Mb(2,"ion-grid"),h.Mb(3,"ion-row"),h.Mb(4,"ion-col",16),h.Mb(5,"ion-item",17),h.Mb(6,"ion-button",18),h.Ub("click",(function(){h.hc(e);const t=i.index;return h.Wb(2).deletePage(t)})),h.lc(7,"Eliminar P\xe1gina"),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Mb(8,"ion-row"),h.Mb(9,"ion-col",19),h.Mb(10,"ion-input",20),h.Ub("ionChange",(function(t){h.hc(e);const n=i.$implicit;return h.Wb(2).titlePage(t,n.id)}))("ionBlur",(function(){return h.hc(e),h.Wb(2).titlesave()})),h.Lb(),h.Lb(),h.Mb(11,"ion-col",19),h.Mb(12,"ion-select",21),h.Ub("ionChange",(function(t){h.hc(e);const n=i.$implicit;return h.Wb(2).changeTypePage(t,n.id)})),h.Mb(13,"ion-select-option",22),h.lc(14,"Entrenamiento"),h.Lb(),h.Mb(15,"ion-select-option",23),h.lc(16,"Quiz"),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Mb(17,"div",24),h.Mb(18,"ion-list"),h.Mb(19,"ion-item-divider",25),h.Mb(20,"ion-select",26),h.Ub("ionChange",(function(t){h.hc(e);const n=i.$implicit;return h.Wb(2).createInputPage(t,n.id)})),h.Mb(21,"ion-select-option",27),h.lc(22,"Campo de Texto"),h.Lb(),h.Mb(23,"ion-select-option",28),h.lc(24,"Campo de texto largo"),h.Lb(),h.Mb(25,"ion-select-option",29),h.lc(26,"Seleccion Unica"),h.Lb(),h.Mb(27,"ion-select-option",30),h.lc(28,"Seleccion multiple"),h.Lb(),h.Mb(29,"ion-select-option",31),h.lc(30,"Imagen"),h.Lb(),h.Mb(31,"ion-select-option",32),h.lc(32,"Video"),h.Lb(),h.Mb(33,"ion-select-option",33),h.lc(34,"Archivo"),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Mb(35,"div",34),h.Mb(36,"ion-list"),h.Mb(37,"ion-reorder-group",35),h.Ub("ionItemReorder",(function(t){h.hc(e);const n=i.$implicit;return h.Wb(2).changeOrder(t,n.id)})),h.kc(38,q,14,8,"div",14),h.Lb(),h.Lb(),h.Lb(),h.Lb()}if(2&e){const e=i.$implicit;h.zb(10),h.cc("value",e.name),h.zb(2),h.cc("value",e.type),h.zb(26),h.cc("ngForOf",e.Chilndren)}}function H(e,i){if(1&e&&(h.Mb(0,"ion-slides",null,13),h.kc(2,G,39,3,"ion-slide",14),h.Lb()),2&e){const e=h.Wb();h.zb(2),h.cc("ngForOf",e.JSONDesigner.pages)}}function Q(e,i){1&e&&(h.Mb(0,"ion-item",45),h.Kb(1,"ion-spinner",46),h.Mb(2,"ion-label"),h.lc(3,"Guardando Cambios..."),h.Lb(),h.Lb())}function X(e,i){if(1&e){const e=h.Nb();h.Mb(0,"ion-button",47),h.Ub("click",(function(){return h.hc(e),h.Wb().exit()})),h.lc(1,"Salir"),h.Lb()}if(2&e){const e=h.Wb();h.cc("color",e.color)}}function Y(e,i){if(1&e){const e=h.Nb();h.Mb(0,"ion-button",47),h.Ub("click",(function(){return h.hc(e),h.Wb().prev()})),h.Kb(1,"ion-icon",48),h.Lb()}if(2&e){const e=h.Wb();h.cc("color",e.color)}}function Z(e,i){if(1&e){const e=h.Nb();h.Mb(0,"ion-button",47),h.Ub("click",(function(){return h.hc(e),h.Wb().next()})),h.Kb(1,"ion-icon",49),h.Lb()}if(2&e){const e=h.Wb();h.cc("color",e.color)}}const ee=[{path:"",component:(()=>{class e{constructor(e,i,t,n,o,c,l,a){this.apiEntrena=e,this.toasCtrl=i,this.storage=t,this.ActiveRoute=n,this.modalCtrl=o,this.router=c,this.dataCompany=l,this.alert=a,this.JSONDesigner={save:!1,pages:[],count:0,prom:0,tot:0,apro:0},this.load=!1,this.nameDesing="",this.viewInit="1",this.save=!1,this.pagesCount=0,this.pageActive=1,this.color="",this.dataCompany.$color.subscribe(e=>{this.color=e})}ngOnInit(){}ionViewWillEnter(){this.loadDesign()}loadDesign(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.storage.getLogin();e&&this.apiEntrena.readDesigner(e[0].token,this.ActiveRoute.snapshot.paramMap.get("id")).subscribe(e=>{console.log(e,"MI DATICA"),"ok"===e.status?(this.JSONDesigner=e.response.JSONEntrena,this.nameDesing=e.response.name,this.pagesCount=this.JSONDesigner.pages.length,this.JSONDesigner.pages.filter(e=>"quiz"===e.type).forEach(e=>{e.Chilndren.forEach(e=>{"radio"!==e.type&&"checkbox"!==e.type||(this.JSONDesigner.count=this.JSONDesigner.count+1)})}),this.load=!0):this.toasCtrl.newCreatedToast("Could not read design, please try again later",!1)},e=>{this.toasCtrl.newCreatedToast("Could not read design, please try again later",!1)})}))}deletePage(e){return Object(a.a)(this,void 0,void 0,(function*(){const i=yield this.alert.create({header:"\xbfQuieres eliminar esta p\xe1gina?",message:"Se borrar\xe1n todos los campos de la p\xe1gina de forma pernamente",buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:()=>{this.JSONDesigner.pages.splice(e,1),this.JSONDesigner.pages.filter(e=>"quiz"===e.type).forEach(e=>{e.Chilndren.forEach(e=>{"radio"!==e.type&&"checkbox"!==e.type||(this.JSONDesigner.count=this.JSONDesigner.count+1)})}),this.autoSave(),this.pagesCount=this.JSONDesigner.pages.length}}]});yield i.present()}))}deleteChild(e,i){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.alert.create({header:"\xbfQuieres eliminar este campo?",message:"Se borrar\xe1 de forma pernamente",buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:()=>{this.JSONDesigner.pages[e].Chilndren.splice(i,1),this.JSONDesigner.pages.filter(e=>"quiz"===e.type).forEach(e=>{e.Chilndren.forEach(e=>{"radio"!==e.type&&"checkbox"!==e.type||(this.JSONDesigner.count=this.JSONDesigner.count+1)})}),this.autoSave(),this.pagesCount=this.JSONDesigner.pages.length}}]});yield t.present()}))}prev(){this.slide.slidePrev(300).then(()=>{this.pageActive=this.pageActive-1})}next(){this.slide.slideNext(300).then(()=>{this.pageActive=this.pageActive+1})}autoSave(){return Object(a.a)(this,void 0,void 0,(function*(){console.log(this.JSONDesigner),this.save=!0;const e=yield this.storage.getLogin();e&&this.apiEntrena.updateDesigner(e[0].token,{_id:this.ActiveRoute.snapshot.paramMap.get("id"),name:this.nameDesing,JSONEntrena:this.JSONDesigner}).subscribe(e=>{console.log(e),"ok"===e.status?(this.save=!1,this.JSONDesigner=e.response.JSONEntrena,this.nameDesing=e.response.name):(this.save=!1,this.toasCtrl.newCreatedToast("Could not update design, please try again later",!1))},e=>{this.save=!1,this.toasCtrl.newCreatedToast("Could not update design, please try again later",!1)})}))}changeTitleDesign(e){this.nameDesing=e.detail.value}changePromDesign(e){this.JSONDesigner.apro=parseFloat(e.detail.value)}newPages(){this.JSONDesigner.pages.push({id:this.JSONDesigner.pages.length+1,name:"",type:"",Chilndren:[]}),this.autoSave(),this.pagesCount=this.JSONDesigner.pages.length}titlePage(e,i){this.JSONDesigner.pages=this.JSONDesigner.pages.map(t=>(t.id===i&&(t.name=e.detail.value),t))}titlesave(){this.autoSave()}changeTypePage(e,i){this.JSONDesigner.pages=this.JSONDesigner.pages.map(t=>(t.id===i&&(t.type=e.detail.value),t)),this.autoSave()}createInputPage(e,i){this.JSONDesigner.pages=this.JSONDesigner.pages.map(t=>{if(t.id===i){let i={};"textline"===e.detail.value?i={title:"",value:"",answer:"",requerid:!1}:"textarea"===e.detail.value?i={title:"",value:"",answer:"",requerid:!1}:"radio"===e.detail.value||"checkbox"===e.detail.value?i={title:"",opts:[],answer:{sum:0,value:0,text:"",op:[]},requerid:!1}:"image"!==e.detail.value&&"file"!==e.detail.value&&"video"!==e.detail.value||(i={title:"",src:"",mime:"",name:""}),t.Chilndren.push({id:t.Chilndren.length+1,type:e.detail.value,values:i})}return t}),this.autoSave()}modalChangeInput(e,i){return Object(a.a)(this,void 0,void 0,(function*(){console.log("Bien");const t=yield this.modalCtrl.create({component:P,componentProps:{data:e,idpage:i},keyboardClose:!0});yield t.present();const n=yield t.onWillDismiss();n&&n.data&&n.data.reload&&(this.JSONDesigner.pages=this.JSONDesigner.pages.map(e=>(e.id===n.data.info.page&&e.Chilndren.map(e=>(e.id===n.data.info.values.id&&(e=n.data.info.values),e)),e)),this.autoSave())}))}changeOrder(e,i){console.log(e,i),this.JSONDesigner.pages=this.JSONDesigner.pages.map(t=>{if(t.id===i){const i=t.Chilndren.splice(e.detail.from,1)[0];console.log(i),t.Chilndren.splice(e.detail.to,0,i)}return t}),e.detail.complete(),this.autoSave()}exit(){this.router.navigate(["/designer-list"])}}return e.\u0275fac=function(i){return new(i||e)(h.Jb(b.a),h.Jb(s.a),h.Jb(r.a),h.Jb(l.a),h.Jb(c.Y),h.Jb(l.f),h.Jb(A.a),h.Jb(c.a))},e.\u0275cmp=h.Db({type:e,selectors:[["app-designer"]],viewQuery:function(e,i){var t;1&e&&h.pc(E,!0),2&e&&h.gc(t=h.Vb())&&(i.slide=t.first)},decls:22,vars:11,consts:[[3,"color"],["defaultHref","/designer-list","icon","chevron-back-outline","slot","start"],["type","text","placeholder","ESCRIBA AQUI EL NOMBRE DEL ENTRENAMIENTO",3,"value","ionChange","ionBlur"],["slot","end","type","number","placeholder","PUNTAJE MINIMO DE APROBACION",3,"value","ionChange","ionBlur"],["fullscreen","true"],[1,"btnPages"],["color","medium","mode","ios",3,"click"],[4,"ngIf"],[1,"ion-no-border"],["lines","none","slot","end",4,"ngIf"],["size","4"],["mode","ios","expand","block",3,"color","click",4,"ngIf"],["size","4",1,"ion-text-center","centrado"],["slide",""],[4,"ngFor","ngForOf"],[1,"page"],["size","12"],["lines","none",1,"sinfondo"],["slot","end","color","medium","mode","ios",3,"click"],["size","6"],["type","text","placeholder","Titulo de la p\xe1gina",3,"value","ionChange","ionBlur"],["placeholder","Seleccione el tipo de p\xe1gina",1,"green",3,"value","ionChange"],["value","entrena"],["value","quiz"],[1,"barra"],["lines","none","color","light"],["placeholder","Seleccione el campo a crear",3,"ionChange"],["value","textline"],["value","textarea"],["value","radio"],["value","checkbox"],["value","image"],["value","video"],["value","file"],[1,"childrens"],["disabled","false",3,"ionItemReorder"],[1,"flex"],[3,"click"],["name","trash","slot","icon-only",3,"color"],["class","ion-text-wrap fullWidth",4,"ngIf"],[1,"ion-text-wrap","fullWidth"],[1,"marginBottom"],[1,"border",3,"value"],[1,"widthFile","ion-padding",3,"src"],["color","warning",1,"widthFile","ion-padding"],["lines","none","slot","end"],["name","crescent","slot","start"],["mode","ios","expand","block",3,"color","click"],["name","chevron-back"],["name","chevron-forward"]],template:function(e,i){1&e&&(h.Mb(0,"ion-header"),h.Mb(1,"ion-toolbar",0),h.Kb(2,"ion-back-button",1),h.Mb(3,"ion-input",2),h.Ub("ionChange",(function(e){return i.changeTitleDesign(e)}))("ionBlur",(function(){return i.autoSave()})),h.Lb(),h.Mb(4,"ion-input",3),h.Ub("ionChange",(function(e){return i.changePromDesign(e)}))("ionBlur",(function(){return i.autoSave()})),h.Lb(),h.Lb(),h.Lb(),h.Mb(5,"ion-content",4),h.Mb(6,"div",5),h.Mb(7,"ion-button",6),h.Ub("click",(function(){return i.newPages()})),h.lc(8,"Nueva P\xe1gina"),h.Lb(),h.Lb(),h.kc(9,H,3,1,"ion-slides",7),h.Lb(),h.Mb(10,"ion-footer",8),h.Mb(11,"ion-toolbar",0),h.kc(12,Q,4,0,"ion-item",9),h.Mb(13,"ion-grid"),h.Mb(14,"ion-row"),h.Mb(15,"ion-col",10),h.kc(16,X,2,1,"ion-button",11),h.kc(17,Y,2,1,"ion-button",11),h.Lb(),h.Mb(18,"ion-col",12),h.lc(19),h.Lb(),h.Mb(20,"ion-col",10),h.kc(21,Z,2,1,"ion-button",11),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb()),2&e&&(h.zb(1),h.cc("color",i.color),h.zb(2),h.cc("value",i.nameDesing),h.zb(1),h.cc("value",i.JSONDesigner.apro),h.zb(5),h.cc("ngIf",i.load),h.zb(2),h.cc("color",i.color),h.zb(1),h.cc("ngIf",i.save),h.zb(4),h.cc("ngIf",1===i.pageActive),h.zb(1),h.cc("ngIf",i.pageActive>1),h.zb(2),h.oc(" ",i.pageActive," / ",i.pagesCount,""),h.zb(2),h.cc("ngIf",i.pageActive<i.pagesCount))},directives:[c.s,c.T,c.d,c.e,c.u,c.fb,c.ab,c.l,c.g,n.i,c.q,c.r,c.J,c.k,c.O,n.h,c.N,c.v,c.L,c.eb,c.M,c.B,c.w,c.H,c.G,c.h,c.t,c.A,c.R,c.j,c.P],styles:["ion-slide[_ngcontent-%COMP%]{width:100%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;padding:15px}ion-item[_ngcontent-%COMP%]:hover{--background:var(--ion-color-light);cursor:pointer}ion-slide[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%}.green[_ngcontent-%COMP%]{background:#fff1c9!important}.fullWidth[_ngcontent-%COMP%]{width:100%}.widthFile[_ngcontent-%COMP%]{width:auto;max-width:80%}.centrado[_ngcontent-%COMP%]{-webkit-box-pack:center;justify-content:center}.centrado[_ngcontent-%COMP%], .flex[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.flex[_ngcontent-%COMP%]{-webkit-box-pack:justify;justify-content:space-between}"]}),e})()}];let ie=(()=>{class e{}return e.\u0275mod=h.Hb({type:e}),e.\u0275inj=h.Gb({factory:function(i){return new(i||e)},imports:[[l.h.forChild(ee)],l.h]}),e})();const te=[{path:"",component:P}];let ne=(()=>{class e{}return e.\u0275mod=h.Hb({type:e}),e.\u0275inj=h.Gb({factory:function(i){return new(i||e)},imports:[[l.h.forChild(te)],l.h]}),e})(),oe=(()=>{class e{}return e.\u0275mod=h.Hb({type:e}),e.\u0275inj=h.Gb({factory:function(i){return new(i||e)},imports:[[n.b,o.a,c.U,ne]]}),e})();t.d(i,"DesignerPageModule",(function(){return ce}));let ce=(()=>{class e{}return e.\u0275mod=h.Hb({type:e}),e.\u0275inj=h.Gb({factory:function(i){return new(i||e)},imports:[[n.b,o.a,c.U,ie,oe]]}),e})()}}]);