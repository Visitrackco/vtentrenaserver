{"version":3,"file":"src_app_Pages_Entrena_preferences_preferences_module_ts.js","mappings":"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","sources":["./src/app/Pages/Entrena/preferences/preferences-routing.module.ts","./src/app/Pages/Entrena/preferences/preferences.module.ts","./src/app/Pages/Entrena/preferences/preferences.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PreferencesPage } from './preferences.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PreferencesPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PreferencesPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PreferencesPageRoutingModule } from './preferences-routing.module';\n\nimport { PreferencesPage } from './preferences.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PreferencesPageRoutingModule\n  ],\n  declarations: [PreferencesPage]\n})\nexport class PreferencesPageModule {}\n","import { HttpErrorResponse, HttpEventType } from '@angular/common/http';\nimport { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { of } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\nimport { ApiEntrenaService } from 'src/app/Services/Api/ApiEntrena.service';\nimport { DataComparnyService } from 'src/app/Services/dataCompany.service';\nimport { StorageWebService } from 'src/app/Services/Storage/StorageWeb.service';\nimport { ToastService } from 'src/app/Services/Utilities/Toast.service';\nimport { environments } from '../../../../environments/environment.prod';\n@Component({\n  selector: 'app-preferences',\n  templateUrl: './preferences.page.html',\n  styleUrls: ['./preferences.page.scss'],\n})\nexport class PreferencesPage implements OnInit {\n\n  @ViewChild('fileUpload', {static: false}) fileUpload: ElementRef;\n  files = [];\n  filesRendering = [];\n  values = {\n    src : '',\n    mime: '',\n    name: ''\n  };\n\n  logo = '';\n  name = '';\n  theme = '';\n\n  constructor(\n    private modalCtrl: ModalController,\n    private storage: StorageWebService,\n    private apiEntrena: ApiEntrenaService,\n    private toasCtrl: ToastService,\n    private dtacompany: DataComparnyService\n  ) { \n    this.dtacompany.$color.subscribe((color) => {\n      this.theme = color;\n    })\n  }\n\n  ngOnInit() {\n  }\n\n  ionViewWillEnter() {\n    this.loadDataMenu();\n  }\n\n\n  async loadDataMenu() {\n\n    const login = await this.storage.getLogin();\n\n    if (login) {\n      this.apiEntrena.preferencesLoad({user: login[0].data._id}, login[0].token).subscribe((data: any) => {\n        console.log(data)\n        if (data.status === 'ok') {\n           \n            this.logo = data.response.logo ? 'https://www.vtentrena.com/' + data.response.logo : '';\n            this.name = data.response.nameCompany ? data.response.nameCompany : 'VTEntrena Application';\n            this.theme = data.response.theme ? data.response.theme : 'light';\n          } else {\n            this.logo = '';\n            this.name = 'VTEntrena Application'\n            this.theme = 'light';\n          }\n      }, (err) => {\n          this.logo = '';\n          this.name = 'VTEntrena Application'\n          this.theme = 'light';\n      })\n    }\n\n\n   \n\n  }\n\n  \n  async uploadFile(file) {\n    const Login = await this.storage.getLogin();\n\n    if (Login) {\n      const formData = new FormData();\n      formData.append('file', file.data);\n      file.inProgress = true;\n      console.log(Login);\n      this.apiEntrena.uploadPreference(formData, Login[0].token).pipe(\n        map((event: any ) => {\n          console.log('Holaa')\n          switch (event.type) {\n            case HttpEventType.UploadProgress:\n              file.progress = Math.round(event.loaded * 1 / event.total);\n              break;\n            case HttpEventType.Response:\n              return event;\n          }\n        }),\n        catchError((error: HttpErrorResponse) => {\n          file.inProgress = false;\n          return of(`${file.data.name} upload failed.`);\n        })).subscribe((event: any) => {\n          if (typeof (event) === 'object') {\n            console.log(event.body, ' Respuesta');\n\n            if (event.body.status === 'ok') {\n               this.logo = environments.URL_NODE + '/' + event.body.response.logo;\n               this.dtacompany.getDataCompany({\n                 logo: environments.URL_NODE + '/uploads/Perfiles/' + event.body.response.logo,\n                 name: event.body.response.nameCompany  ? event.body.response.nameCompany : 'VTEntrena Application'\n               })\n               this.files = [];\n            } else {\n              this.toasCtrl.newCreatedToast('Upload failed', false)\n            }\n          }\n        });\n    }\n  }\n\n uploadFiles() {\n    this.fileUpload.nativeElement.value = '';\n    this.files.forEach(file => {\n      this.uploadFile(file);\n    });\n}\n\n  onClick() {\n    const fileUpload = this.fileUpload.nativeElement;\n    fileUpload.onchange = () => {\n    // tslint:disable-next-line:prefer-for-of\n    for (let index = 0; index < fileUpload.files.length; index++) {\n     const file: File = fileUpload.files[index];\n     console.log(file, file.name)\n\n     this.files.push({ data: file, inProgress: false, progress: 0});\n    }\n    \n    };\n    fileUpload.click();\n}\n\ndeletedFile() {\n  this.files = [];\n}\n\nchangeTheme(event) {\n  this.theme = event.detail.value;\n}\n\nasync save() {\n  const login = await this.storage.getLogin();\n\n  if (login) {\n    this.apiEntrena.preferences({name: this.name, theme: this.theme}, login[0].token).subscribe((data: any) => {\n      console.log(data)\n      if (data.status === 'ok') {\n\n          this.toasCtrl.newCreatedToast('Datos Actualizados', true)\n         \n          this.name = data.response.nameCompany ? data.response.nameCompany : 'VTEntrena Application';\n          this.theme = data.response.theme ? data.response.theme : 'light';\n          this.dtacompany.getDataCompany({\n  \n            //logo: 'https://www.vtentrena.com/' + data.response.logo,\n            name: data.response.nameCompany  ? data.response.nameCompany : 'VTEntrena Application'\n          })\n          this.dtacompany.setColor(this.theme);\n        } else {\n          this.toasCtrl.newCreatedToast('No se pudo actualizar la información', false)\n          this.theme = 'light';\n          this.name = 'VTEntrena Application'\n        }\n    }, (err) => {\n      this.toasCtrl.newCreatedToast('No se pudo actualizar la información', false)\n      this.theme = 'light';\n      this.name = 'VTEntrena Application'\n    })\n  }\n\n}\n\n  // CLOSE FILES\n\n \n\n\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}