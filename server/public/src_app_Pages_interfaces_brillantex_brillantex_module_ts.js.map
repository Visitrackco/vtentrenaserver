{"version":3,"file":"src_app_Pages_interfaces_brillantex_brillantex_module_ts.js","mappings":"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","sources":["./src/app/Pages/interfaces/brillantex/brillantex-routing.module.ts","./src/app/Pages/interfaces/brillantex/brillantex.module.ts","./src/app/Pages/interfaces/brillantex/brillantex.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { BrillantexPage } from './brillantex.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: BrillantexPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class BrillantexPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { BrillantexPageRoutingModule } from './brillantex-routing.module';\n\nimport { BrillantexPage } from './brillantex.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    BrillantexPageRoutingModule\n  ],\n  declarations: [BrillantexPage]\n})\nexport class BrillantexPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { AlertController, MenuController, ModalController, PopoverController, ToastController } from '@ionic/angular';\nimport { OpcionesCDOComponent } from 'src/app/components/opciones-cdo/opciones-cdo.component';\nimport { ApiService } from 'src/app/Services/Api/Api.service';\nimport * as _ from 'underscore'\nimport * as moment from 'moment-timezone'\nimport { ActivatedRoute } from '@angular/router';\nimport { LoadingService } from 'src/app/Services/Utilities/Loading.service';\nimport { UsariosInverComponent } from 'src/app/components/Inverpack/usarios-inver/usarios-inver.component';\nimport { ToastService } from 'src/app/Services/Utilities/Toast.service';\n\n@Component({\n  selector: 'app-brillantex',\n  templateUrl: './brillantex.page.html',\n  styleUrls: ['./brillantex.page.scss'],\n})\nexport class BrillantexPage implements OnInit {\n\n  planeaciones = [];\n  carga;\n  tkn;\n\n  constructor(\n    private api: ApiService,\n    private popover: PopoverController,\n    private route: ActivatedRoute,\n    private modalCtrl: ModalController,\n    private alert: AlertController,\n    private toast: ToastController,\n    private loading: LoadingService,\n    private ts: ToastService,\n    private menuCtrl: MenuController\n  ) { }\n\n  ngOnInit() {\n  }\n\n  ionViewWillEnter() {\n\n    this.menuCtrl.enable(false, 'menu')\n    this.route.queryParams.subscribe((param) => {\n      console.log(param);\n      this.tkn = param.accesstoken;\n      this.cargarData()\n    })\n\n  \n\n    \n  }\n\n\n  getInfo(guid) {\n    return new Promise((resolve, reject) => {\n      this.api.getActivitieInfo(this.tkn, guid).subscribe((data) => {\n        if (data) {\n          \n          resolve(data)\n        } else {\n          resolve (false)\n        }\n      })\n    })\n  }\n\n  cargarData() {\n    this.carga = false;\n    this.planeaciones = [];\n    this.api.getActivities3(this.tkn, moment().subtract(3, 'days').format('YYYY-MM-DD HH:mm') , moment().format('YYYY-MM-DD HH:mm'), 'B5205A62-D7E0-4D02-9C29-9B386B88099D').subscribe(async (data: any) => {\n     \n\nconsole.log(data)\n\n      for (const item of data) {\n\n        const miData: any = await this.getInfo(item.GUID)\n\n        if (miData) {\n\n          const fecha = miData.Values.filter((it) => it.apiId == 'FECHAHORA');\n          miData.fecha = fecha.length > 0 ? fecha[0].Value : 'No tiene fecha';\n\n         if (miData.CompanyStatusName == 'VISITA PROGRAMADA') {\n            this.planeaciones.push(miData)\n         }\n        \n         \n\n        \n              \n            \n          } \n\n      \n        \n        \n        \n\n      }\n\n   \n      this.carga = true;\n\n   \n\n      console.log(this.planeaciones)\n\n   \n   \n    })\n  }\n\n\n  reenviar(item) {\n\n    this.loading.createLoading('Reenviando Planeación')\n\n    this.api.changeDispath({\n      tkn: this.tkn,\n      user: item.AssignedTo_GUID,\n      status: item.CompanyStatusGUID,\n      date: moment().add(2, 'minutes').format('YYYY-MM-DD HH:mm'),\n      guid: item.GUID\n    }).subscribe(async (data: any) => {\n      if (data) {\n        const toas = await this.toast.create({\n          message: 'Planeación reenviada',\n          duration: 2000\n        })\n\n        await toas.present();\n      }\n\n      this.loading.cancelLoading()\n    }, (err) => {\n      this.loading.cancelLoading()\n    })\n\n  }\n\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}