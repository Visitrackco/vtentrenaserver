{"version":3,"file":"src_app_Pages_interfaces_cdosupervisores_cdosupervisores_module_ts.js","mappings":"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","sources":["./src/app/Pages/interfaces/cdosupervisores/cdosupervisores-routing.module.ts","./src/app/Pages/interfaces/cdosupervisores/cdosupervisores.module.ts","./src/app/Pages/interfaces/cdosupervisores/cdosupervisores.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CdosupervisoresPage } from './cdosupervisores.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CdosupervisoresPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CdosupervisoresPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CdosupervisoresPageRoutingModule } from './cdosupervisores-routing.module';\n\nimport { CdosupervisoresPage } from './cdosupervisores.page';\nimport { PipesModule } from 'src/app/Pipes/pipes.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CdosupervisoresPageRoutingModule,\n    PipesModule\n  ],\n  declarations: [CdosupervisoresPage]\n})\nexport class CdosupervisoresPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ModalController, PopoverController } from '@ionic/angular';\nimport { OpcionesCDOComponent } from 'src/app/components/opciones-cdo/opciones-cdo.component';\nimport { ApiService } from 'src/app/Services/Api/Api.service';\nimport * as _ from 'underscore'\nimport * as moment from 'moment-timezone'\nimport { ActivatedRoute } from '@angular/router';\nimport { ControlcdoasistencialComponent } from 'src/app/components/controlcdoasistencial/controlcdoasistencial.component';\n\n\n@Component({\n  selector: 'app-cdosupervisores',\n  templateUrl: './cdosupervisores.page.html',\n  styleUrls: ['./cdosupervisores.page.scss'],\n})\nexport class CdosupervisoresPage implements OnInit {\n\n  actividades = [];\n  unicos = [];\n\n  filtro = 'Todos'\n  txt = '';\n\n  cargaActividades;\n  tkn;\n\n  padres = [];\n\n  constructor(\n    private api: ApiService,\n    private popover: PopoverController,\n    private route: ActivatedRoute,\n    private modalCtrl: ModalController\n  ) { }\n\n  ngOnInit() {\n  }\n\n  getInfo(guid) {\n    return new Promise((resolve, reject) => {\n      this.api.getActivitieInfo(this.tkn, guid).subscribe((data) => {\n        if (data) {\n          resolve(data)\n        } else {\n          resolve (false)\n        }\n      })\n    })\n  }\n\n\n  ionViewWillEnter() {\n\n    this.route.queryParams.subscribe((param) => {\n      console.log(param);\n      this.tkn = param.tkn;\n      this.cargarData()\n    })\n\n  \n   \n  }\n\n  cargarData() {\n    this.cargaActividades = false;\n    this.actividades = [];\n    this.api.getActivities(this.tkn).subscribe(async (data: any) => {\n     \n\n      console.log(data)\n    \n\n      \n\n      data = data.filter((item) => item.CompanyStatusName != 'Borrado' && item.ParentGUID)\n\n      this.unicos = _.uniq(_.map(data, (item) => item.CompanyStatusName)).filter((item) => item != 'Borrado')\n      this.unicos.unshift('Todos')\n\n      this.padres = _.uniq(_.map(data, (item) => item.ParentGUID))\n\n      for (const item of data) {\n\n        const miData: any = await this.getInfo(item.GUID)\n\n        if (miData) {\n          miData.color = this.color(miData.CompanyStatusName);\n          miData.icolor = this.color(miData.CompanyStatusName, true);\n\n          if (miData.Values.length) {\n            const fecha = miData.Values.filter((dat) => dat.apiId == 'FECHA_SOLICITUD');\n            if (fecha.length > 0) {\n              const mifecha = moment(fecha[0].Value).format('YYYY-MM-DD HH:mm');\n              const duracion = moment(moment().format('YYYY-MM-DD HH:mm')).diff(moment(mifecha), 'minutes')\n              miData.tiempo = duracion + ' min'\n            } else {\n              miData.tiempo = '---';\n            }\n          } else {\n            miData.tiempo = '---';\n          }\n      \n          this.actividades.push(miData);\n        }\n        \n\n      }\n      this.cargaActividades = true;\n\n      console.log(this.actividades)\n\n   \n   \n    })\n  }\n\n  cambio(event) {\n    this.txt = event.detail.value;\n  }\n\n  async handleRefresh(event) {\n\n    await this.cargarData();\n    this.filtro = 'Todos'\n    event.target.complete();\n  }\n\n  color(name, ic?) {\n    if (name == 'CANCELADO POR DEMORA') {\n      return ic ? 'igris' : 'gris'\n    }\n    if (name == 'Completado') {\n      return ic ? 'iverde' :  'verde'\n    }\n\n    if (name == 'EN PROCESO DE ASEO') {\n      return ic ? 'iamarillo' :  'amarillo'\n    }\n\n    if (name == 'PENDIENTE ASEO') {\n      return ic ? 'irojo' :  'rojo'\n    }\n\n    if (name == 'ELIMINADA POR LIMPIEZA PREVIA A SOLICITUD') {\n      return ic ? 'iazul' :  'azul'\n    }\n\n    \n  }\n\n  async filtros(event ) {\n\n    const miPopover = await this.popover.create({\n      component: OpcionesCDOComponent,\n      componentProps: {\n        opciones: this.unicos\n      },\n      event: event\n    })\n\n    await miPopover.present();\n\n    const dataResume: any = await miPopover.onWillDismiss();\n\n    if (dataResume.data) {\n      this.filtro = dataResume.data.by;\n    }\n\n  }\n\n  async control(event ) {\n\n    const modal = await this.modalCtrl.create({\n      component: ControlcdoasistencialComponent,\n      componentProps: {\n        padres: this.padres,\n        data: this.actividades,\n        tkn: this.tkn\n      }\n  \n    })\n\n    await modal.present();\n\n    const resp = await modal.onWillDismiss();\n\n    if (resp.data) {\n\n      if (resp.data.revisados.length > 0) {\n        _.each(resp.data.revisados, (ele, i) => {\n          _.each(this.actividades, (item, j) => {\n            if (item.ParentGUID == ele) {\n              item.CompanyStatusName = 'ELIMINADA POR LIMPIEZA PREVIA A SOLICITUD'\n              item.color = this.color(item.CompanyStatusName);\n              item.icolor = this.color(item.CompanyStatusName, true);\n            }\n          })\n        })\n      }\n\n    } \n\n  \n\n  }\n\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}