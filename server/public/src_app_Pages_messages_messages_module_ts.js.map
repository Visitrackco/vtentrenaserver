{"version":3,"file":"src_app_Pages_messages_messages_module_ts.js","mappings":"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","sources":["./src/app/Pages/messages/messages-routing.module.ts","./src/app/Pages/messages/messages.module.ts","./src/app/Pages/messages/messages.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { MessagesPage } from './messages.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MessagesPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MessagesPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MessagesPageRoutingModule } from './messages-routing.module';\n\nimport { MessagesPage } from './messages.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    MessagesPageRoutingModule\n  ],\n  declarations: [MessagesPage]\n})\nexport class MessagesPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Socket } from 'ngx-socket-io';\nimport { StorageWebService } from 'src/app/Services/Storage/StorageWeb.service';\nimport { ApiService } from 'src/app/Services/Api/Api.service';\nimport { Observable } from 'rxjs';\nimport * as moment from 'moment-timezone';\n@Component({\n  selector: 'app-messages',\n  templateUrl: './messages.page.html',\n  styleUrls: ['./messages.page.scss'],\n})\nexport class MessagesPage implements OnInit {\n  \n  idUser = '';\n  listMessages = [];\n  message = '';\n  idChat = '';\n  constructor(\n    private socket: Socket,\n    private storage: StorageWebService,\n    private apiService: ApiService,\n  ) { \n\n    this.recepMessage().subscribe((data: any) => {\n      console.log(data, ' Mi data');\n      const audio = new Audio('/assets/message.mp3');\n      audio.play();\n      this.listMessages.push(data.response);\n    });\n  }\n\n  ngOnInit() {\n  }\n// mary isabell administrativo\n// jimmy caicedo sector hospitalario \n\n\n  async ionViewWillEnter() {\n   this.loadMessages();\n   const login = await this.storage.getLogin();\n   if (login) {\n     if (login[0].type === 'exter') {\n      this.idUser = login[0].login;\n     } else {\n      this.idUser = login[0].UserID;\n     }\n    \n   }\n  }\n\n  async loadMessages() {\n      const chat = await this.storage.getChat();\n\n      if (chat) {\n        this.idChat = chat;\n        this.socket.emit('entryChat', {idChat: chat});\n        this.apiService.getOneChat(chat).subscribe((data: any) => {\n           if (data.status === 'ok') {\n              this.listMessages = data.response;\n           }\n        })\n      }\n  }\n\n  async sendMessages() {\n        this.socket.emit('sendMessage', {\n          ID: this.idUser,\n          parentChat: this.idChat,\n          message: this.message\n        });\n\n        this.listMessages.push({\n          dateMessage: new Date().getDate(),\n          message: this.message,\n          idUser: this.idUser\n        });\n\n        this.message = '';\n  }\n\n\n  recepMessage() {\n    const observer = new Observable(obser => {\n      this.socket.on('recepMessage', (data) => {\n        obser.next(data);\n      });\n    });\n\n    return  observer;\n}\n\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}