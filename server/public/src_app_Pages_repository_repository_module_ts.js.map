{"version":3,"file":"src_app_Pages_repository_repository_module_ts.js","mappings":"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","sources":["./src/app/Pages/repository/repository-routing.module.ts","./src/app/Pages/repository/repository.module.ts","./src/app/Pages/repository/repository.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RepositoryPage } from './repository.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RepositoryPage,\n  }\n  \n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RepositoryPageRoutingModule {}\n","\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RepositoryPageRoutingModule } from './repository-routing.module';\n\nimport { RepositoryPage } from './repository.page';\nimport { CategoryPage } from '../Modals/category/category.page';\nimport { CategoryPageModule } from '../Modals/category/category.module';\n\n@NgModule({\n  entryComponents: [\n    CategoryPage\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CategoryPageModule,\n    RepositoryPageRoutingModule\n  ],\n  declarations: [RepositoryPage]\n})\nexport class RepositoryPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ModalController, AlertController } from '@ionic/angular';\nimport { CategoryPage } from '../Modals/category/category.page';\nimport { ApiService } from 'src/app/Services/Api/Api.service';\nimport { StorageWebService } from 'src/app/Services/Storage/StorageWeb.service';\n\n@Component({\n  selector: 'app-repository',\n  templateUrl: './repository.page.html',\n  styleUrls: ['./repository.page.scss'],\n})\nexport class RepositoryPage implements OnInit {\n\n\n  listMyCategories: any[] = [];\n  userID = '';\n\n  constructor(\n    private modalCtrl: ModalController,\n    private apiService: ApiService,\n    private storage: StorageWebService,\n    private alertCtrl: AlertController\n  ) { }\n\n  ngOnInit() {\n  }\n\n  ionViewWillEnter() {\n    this.listCategories();\n  }\n\n  async listCategories() {\n    const Login = await this.storage.getLogin();\n    console.log(Login);\n    if (Login) {\n      const userID = Login[0].type === 'exter' ? Login[0].login : Login[0].UserID;\n      this.userID = userID;\n\n      this.apiService.getCategory(Login[0].CompanyID, userID).subscribe((resp: any) => {\n          console.log(resp);\n          if (resp.status) {\n            this.listMyCategories = resp.response;\n          }\n      });\n    }\n    \n  }\n\n  async alterCategory( category ) {\n    const modal = await this.modalCtrl.create({\n      component: CategoryPage,\n      componentProps: {\n        type: 'alter',\n        categoryDatAlter: category,\n        title: 'Editar Categoria'\n      }\n    });\n\n    await modal.present();\n\n    const i  = await modal.onWillDismiss();\n\n    if (i) {\n      this.listCategories();\n    }\n  }\n\n\n  async deletedCategorie(id) {\n\n      const data: any = await this.listData(id);\n\n      if (data) {\n        const alert = await this.alertCtrl.create({\n          header: 'Esta seguro de eliminar esta categoria?',\n          message: `Dentro de ella se encuentran ${data.files} archivos y  ${data.folder} carpetas.`,\n          buttons: [\n            {\n              text: 'Cancelar',\n              role: 'cancel'\n            },\n            {\n              text: 'Aceptar',\n              handler: () => {\n                this.apiService.deletedCategory(id).subscribe((resp: any) => {\n           \n                  if (resp.status) {\n                    this.listMyCategories = this.listMyCategories.filter((item) => {\n                      return item._id !== id;\n                    })\n                  }\n              });\n              }\n            }\n          ]\n        });\n  \n        return await alert.present();\n      }\n\n      \n  }\n\n  async permiss( categoryID ) {\n    console.log('click');\n    const category: any = this.listMyCategories.filter((item) => item._id === categoryID);\n    const modal = await this.modalCtrl.create({\n      component: CategoryPage,\n      componentProps: {\n        type: 'permiss',\n        listPermiss: category[0].permiss,\n        idCategory: categoryID,\n        title: 'Administrar Permisos'\n      }\n    });\n\n    await modal.present();\n\n    const i  = await modal.onWillDismiss();\n\n    if (i) {\n      this.listCategories();\n    }\n  }\n\n  listData(id) {\n      return new Promise((resolve, reject) => {\n          this.apiService.getFolders(id, '').subscribe((res: any) => {\n            if (res.status === 'ok') {\n                resolve({\n                  files: res.response.filter((item) => item.typeAction === 'file').length,\n                  folder: res.response.filter((item) => item.typeAction === 'folder').length\n                })\n            } else {\n              reject({\n                error: res.err\n              })\n            }\n          })\n      })\n  }\n\n\n  async addCategory() {\n      const modal = await this.modalCtrl.create({\n        component: CategoryPage,\n        componentProps: {\n          type: 'category',\n          title: 'Crear Categoria'\n        }\n      });\n\n      await modal.present();\n\n      const retu: any = await modal.onWillDismiss();\n\n      if (retu) {\n          console.log(retu, 'OK');\n          if (retu.data.st) {\n            this.listCategories();\n          }\n      } else {\n        console.log('ERROR')\n      }\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}