function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function _createClass(n,e,t){return e&&_defineProperties(n.prototype,e),t&&_defineProperties(n,t),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{KMca:function(n,e,t){"use strict";t.r(e);var i,o=t("ofXK"),r=t("3Pt+"),a=t("TEn/"),c=t("tyNb"),s=t("mrSG"),l=t("Rwse"),b=t("w9U0"),u=t("J07l"),f=t("fXoL"),d=((i=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"transform",value:function(n,e){e=e.toLowerCase();var t=n.filter((function(n){var t=n.infoAction.name;if(n.infoAction.name=n.infoAction.name.toLowerCase(),n.infoAction.name.includes(e))return n.infoAction.name=t,n}));return console.log(t,"Retorno"),t}}]),n}()).\u0275fac=function(n){return new(n||i)},i.\u0275pipe=f.Ib({name:"filterRepository",type:i,pure:!0}),i);function h(n,e){1&n&&(f.Mb(0,"strong"),f.lc(1,"- Papelera"),f.Lb())}var p=function(n){return["/repository/folders",n]};function m(n,e){if(1&n&&(f.Mb(0,"ion-chip",15),f.lc(1),f.Lb()),2&n){var t=e.$implicit;f.cc("routerLink",f.fc(2,p,t.id)),f.zb(1),f.nc("",t.name," / ")}}function g(n,e){1&n&&(f.Mb(0,"h3"),f.lc(1,"A\xfan no tienes archivos en esta carpeta"),f.Lb())}function v(n,e){1&n&&(f.Mb(0,"h3"),f.lc(1,"A\xfan no tienes archivos ni carpetas en la papelera"),f.Lb())}function k(n,e){if(1&n&&(f.Mb(0,"div",16),f.kc(1,g,2,0,"h3",4),f.kc(2,v,2,0,"h3",4),f.Lb()),2&n){var t=f.Wb();f.zb(1),f.cc("ngIf","trash"!==t.parentId),f.zb(1),f.cc("ngIf","trash"===t.parentId)}}function y(n,e){if(1&n&&(f.Mb(0,"ion-label"),f.lc(1),f.Lb()),2&n){var t=f.Wb(2);f.zb(1),f.nc(" Tienes ",t.children.length," archivos en esta carpeta ")}}function C(n,e){if(1&n&&(f.Mb(0,"ion-label"),f.lc(1),f.Lb()),2&n){var t=f.Wb(2);f.zb(1),f.nc(" Tienes ",t.children.length," en la papelera ")}}function M(n,e){if(1&n){var t=f.Nb();f.Mb(0,"div",17),f.Mb(1,"ion-item-divider",18),f.kc(2,y,2,1,"ion-label",4),f.kc(3,C,2,1,"ion-label",4),f.Mb(4,"ion-chip",19),f.Ub("click",(function(){return f.hc(t),f.Wb().addChild("keys")})),f.Kb(5,"ion-icon",20),f.lc(6," Permisos"),f.Lb(),f.Lb(),f.Lb()}if(2&n){var i=f.Wb();f.zb(2),f.cc("ngIf","trash"!==i.parentId),f.zb(1),f.cc("ngIf","trash"===i.parentId)}}function L(n,e){if(1&n&&(f.Mb(0,"strong"),f.lc(1),f.Lb()),2&n){var t=f.Wb(2).$implicit;f.zb(1),f.mc(t.infoAction.name)}}function w(n,e){if(1&n&&(f.Mb(0,"ion-item"),f.Kb(1,"ion-icon",26),f.Mb(2,"ion-label"),f.kc(3,L,2,1,"strong",4),f.Kb(4,"br"),f.Lb(),f.Lb()),2&n){var t=f.Wb().$implicit;f.zb(3),f.cc("ngIf","file"===t.typeAction)}}function I(n,e){if(1&n&&(f.Mb(0,"ion-item",27),f.Kb(1,"ion-icon",28),f.Mb(2,"ion-label"),f.Mb(3,"strong"),f.lc(4),f.Lb(),f.Kb(5,"br"),f.Mb(6,"p"),f.lc(7),f.Lb(),f.Lb(),f.Lb()),2&n){var t=f.Wb().$implicit;f.cc("routerLink",f.fc(3,p,t._id)),f.zb(4),f.mc(t.infoAction.name),f.zb(3),f.mc(t.infoAction.description)}}function z(n,e){if(1&n){var t=f.Nb();f.Mb(0,"ion-item-option",29),f.Ub("click",(function(){f.hc(t);var n=f.Wb().$implicit;return f.Wb().download(n.infoAction.path,n.infoAction.name)})),f.Kb(1,"ion-icon",30),f.Lb()}}function A(n,e){if(1&n){var t=f.Nb();f.Mb(0,"ion-item-option",31),f.Ub("click",(function(){f.hc(t);var n=f.Wb().$implicit;return f.Wb().alertDelete(n._id,n.typeAction)})),f.Kb(1,"ion-icon",32),f.Lb()}}function x(n,e){if(1&n){var t=f.Nb();f.Mb(0,"ion-item-option",33),f.Ub("click",(function(){f.hc(t);var n=f.Wb().$implicit;return f.Wb().recoverChildren(n._id,n.typeAction)})),f.Kb(1,"ion-icon",34),f.Lb()}}function T(n,e){if(1&n&&(f.Mb(0,"ion-item-sliding"),f.kc(1,w,5,1,"ion-item",4),f.kc(2,I,8,5,"ion-item",21),f.Mb(3,"ion-item-options",22),f.kc(4,z,2,0,"ion-item-option",23),f.kc(5,A,2,0,"ion-item-option",24),f.kc(6,x,2,0,"ion-item-option",25),f.Lb(),f.Lb()),2&n){var t=e.$implicit,i=f.Wb();f.zb(1),f.cc("ngIf","file"===t.typeAction),f.zb(1),f.cc("ngIf","folder"===t.typeAction),f.zb(2),f.cc("ngIf","file"===t.typeAction&&"trash"!==i.parentId),f.zb(1),f.cc("ngIf","trash"!==i.parentId),f.zb(1),f.cc("ngIf","trash"===i.parentId)}}function _(n,e){if(1&n){var t=f.Nb();f.Mb(0,"ion-fab",35),f.Mb(1,"ion-fab-button",1),f.Kb(2,"ion-icon",36),f.Lb(),f.Mb(3,"ion-fab-list",37),f.Mb(4,"ion-fab-button",29),f.Ub("click",(function(){return f.hc(t),f.Wb().addChild("file")})),f.Kb(5,"ion-icon",38),f.Lb(),f.Mb(6,"ion-fab-button",29),f.Ub("click",(function(){return f.hc(t),f.Wb().addChild("folder")})),f.Kb(7,"ion-icon",39),f.Lb(),f.Lb(),f.Lb()}}var P,W,K=[{path:"",component:(P=function(){function n(e,t,i,o,r,a){_classCallCheck(this,n),this.modalCtrl=e,this.activeRoute=t,this.myToast=i,this.apiService=o,this.router=r,this.alertCtrl=a,this.parentId="",this.children=[],this.textFilter="",this.listPath=[]}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){var n=this;this.parentId=this.activeRoute.snapshot.paramMap.get("parent"),"trash"===this.parentId?this.listChildren("trash"):(this.apiService.getPathFolder(this.parentId).subscribe((function(e){"ok"===e.status&&(n.listPath=e.response)})),this.listChildren(""))}},{key:"addChild",value:function(n){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="","file"===n?t="Subir Archivos":"folder"===n?t="Crear Carpeta":"keys"===n&&(t="\xbfQui\xe9n tiene permisos para esta carpeta?"),e.next=4,this.modalCtrl.create({component:l.a,componentProps:{type:n,title:t,parentId:this.parentId}});case 4:return i=e.sent,e.next=7,i.present();case 7:return e.next=9,i.onWillDismiss();case 9:(o=e.sent)&&(o.data.status?(this.listChildren(""),this.myToast.newCreatedToast(o.data.message,!0)):this.myToast.newCreatedToast("No se pudo realizar la acci\xf3n",!1));case 11:case"end":return e.stop()}}),e,this)})))}},{key:"listChildren",value:function(n){var e=this;this.apiService.getFolders(this.parentId,n).subscribe((function(n){if(console.log(n),"ok"===n.status){var t=n.response.filter((function(n){return"file"===n.typeAction})),i=n.response.filter((function(n){return"folder"===n.typeAction}));e.children=t,i.forEach((function(n){return e.children.push(n)}))}}),(function(){e.myToast.newCreatedToast("No se pudo realizar la acci\xf3n",!1)}))}},{key:"listData",value:function(n){var e=this;return new Promise((function(t,i){e.apiService.getFolders(n,"").subscribe((function(n){"ok"===n.status?t({files:n.response.filter((function(n){return"file"===n.typeAction})).length,folder:n.response.filter((function(n){return"folder"===n.typeAction})).length}):i({error:n.err})}))}))}},{key:"download",value:function(n,e){console.log(e),window.open("http://localhost:3000/download?path="+n+"&name="+e,"_self")}},{key:"filter",value:function(n){this.textFilter=n.detail.value}},{key:"alertDelete",value:function(n,e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var i,o,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.listData(n);case 2:if(!(i=t.sent)){t.next=10;break}return t.next=6,this.alertCtrl.create({header:"Esta seguro de eliminar esta Carpeta?",message:"Dentro de ella se encuentran ".concat(i.files," archivos y  ").concat(i.folder," carpetas."),buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:function(){r.deleteChildren(n,e)}}]});case 6:return o=t.sent,t.next=9,o.present();case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"deleteChildren",value:function(n,e){var t=this,i="file"===e?"Archivo eliminado del repositorio":"Carpeta eliminada del repositorio";this.apiService.deletedFolder(n).subscribe((function(n){"ok"===n.status?(t.listChildren(""),t.myToast.newCreatedToast(i,!1)):t.myToast.newCreatedToast("No se pudo realizar la acci\xf3n",!1)}),(function(){t.myToast.newCreatedToast("No se pudo realizar la acci\xf3n",!1)}))}},{key:"recoverChildren",value:function(n,e){var t=this,i="file"===e?"Archivo recuperado":"Carpeta recuperada";console.log(n),this.apiService.recoverFolder(n).subscribe((function(n){"ok"===n.status?(t.listChildren("trash"),t.myToast.newCreatedToast(i,!1)):t.myToast.newCreatedToast("No se pudo realizar la acci\xf3n",!1)}),(function(){t.myToast.newCreatedToast("No se pudo realizar la acci\xf3n",!1)}))}},{key:"trash",value:function(){this.router.navigate(["repository/folders/trash"])}},{key:"return",value:function(){}}]),n}(),P.\u0275fac=function(n){return new(n||P)(f.Jb(a.Y),f.Jb(c.a),f.Jb(b.a),f.Jb(u.a),f.Jb(c.f),f.Jb(a.a))},P.\u0275cmp=f.Db({type:P,selectors:[["app-folders"]],decls:20,vars:9,consts:[[1,"ion-no-border"],["color","danger"],["slot","start"],["defaultHref","repository","icon","chevron-back-outline"],[4,"ngIf"],["slot","end"],[3,"click"],["name","trash-outline","slot","icon-only"],[1,"navigator"],["color","medium",3,"routerLink",4,"ngFor","ngForOf"],["mode","ios","placeholder","Buscar archivos o carpetas",3,"ionChange"],["class","menssage",4,"ngIf"],["class","calc",4,"ngIf"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed",4,"ngIf"],["color","medium",3,"routerLink"],[1,"menssage"],[1,"calc"],["color","light",1,"divider"],["color","warning","slot","end",3,"click"],["name","key-outline","slot","start"],[3,"routerLink",4,"ngIf"],["side","end"],["color","light",3,"click",4,"ngIf"],["color","danger",3,"click",4,"ngIf"],["color","secondary",3,"click",4,"ngIf"],["name","documents-outline","slot","start"],[3,"routerLink"],["name","folder","slot","start"],["color","light",3,"click"],["name","download-outline","slot","icon-only"],["color","danger",3,"click"],["name","trash","slot","icon-only"],["color","secondary",3,"click"],["name","arrow-up-outline","slot","icon-only"],["vertical","bottom","horizontal","end","slot","fixed"],["name","add-outline"],["side","top"],["name","document-attach-outline"],["name","folder-outline"]],template:function(n,e){1&n&&(f.Mb(0,"ion-header",0),f.Mb(1,"ion-toolbar",1),f.Mb(2,"ion-buttons",2),f.Kb(3,"ion-back-button",3),f.Lb(),f.Mb(4,"ion-title"),f.lc(5,"Sistema de archivos "),f.kc(6,h,2,0,"strong",4),f.Lb(),f.Mb(7,"ion-buttons",5),f.Mb(8,"ion-button",6),f.Ub("click",(function(){return e.trash()})),f.Kb(9,"ion-icon",7),f.Lb(),f.Lb(),f.Lb(),f.Lb(),f.Mb(10,"ion-content"),f.Mb(11,"div",8),f.kc(12,m,2,4,"ion-chip",9),f.Lb(),f.Mb(13,"ion-searchbar",10),f.Ub("ionChange",(function(n){return e.filter(n)})),f.Lb(),f.Mb(14,"ion-list"),f.kc(15,k,3,2,"div",11),f.kc(16,M,7,2,"div",12),f.kc(17,T,7,5,"ion-item-sliding",13),f.Xb(18,"filterRepository"),f.Lb(),f.kc(19,_,8,0,"ion-fab",14),f.Lb()),2&n&&(f.zb(6),f.cc("ngIf","trash"===e.parentId),f.zb(6),f.cc("ngForOf",e.listPath),f.zb(3),f.cc("ngIf",0===e.children.length),f.zb(1),f.cc("ngIf",e.children.length>0),f.zb(1),f.cc("ngForOf",f.Yb(18,6,e.children,e.textFilter)),f.zb(2),f.cc("ngIf","trash"!==e.parentId))},directives:[a.s,a.T,a.h,a.d,a.e,a.S,o.i,a.g,a.t,a.l,o.h,a.K,a.fb,a.B,a.j,a.db,c.g,a.w,a.A,a.z,a.y,a.v,a.x,a.n,a.o,a.p],pipes:[d],styles:[".calc[_ngcontent-%COMP%], .menssage[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.menssage[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;opacity:.3}.calc[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{opacity:.7;margin-left:15px;padding-bottom:10px;border-bottom:1px solid rgba(0,0,0,.1)}ion-list[_ngcontent-%COMP%]{margin-bottom:30px}.navigator[_ngcontent-%COMP%]{width:100%;padding:5px 10px}"]}),P)}],O=((W=function n(){_classCallCheck(this,n)}).\u0275mod=f.Hb({type:W}),W.\u0275inj=f.Gb({factory:function(n){return new(n||W)},imports:[[c.h.forChild(K)],c.h]}),W),F=t("iZCz"),N=t("BQi/");t.d(e,"FoldersPageModule",(function(){return S}));var R,S=((R=function n(){_classCallCheck(this,n)}).\u0275mod=f.Hb({type:R}),R.\u0275inj=f.Gb({factory:function(n){return new(n||R)},imports:[[o.b,r.a,a.U,O,F.a,N.a]]}),R)}}]);