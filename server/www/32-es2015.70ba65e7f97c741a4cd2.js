(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{n4yB:function(t,i,e){"use strict";e.r(i);var o=e("ofXK"),n=e("3Pt+"),r=e("TEn/"),s=e("tyNb"),c=e("mrSG"),l=e("Rwse"),a=e("J07l"),b=e("VOof"),d=e("fXoL");function g(t,i){if(1&t&&(d.Mb(0,"div",9),d.Mb(1,"ion-item-divider",10),d.Mb(2,"ion-label"),d.lc(3),d.Lb(),d.Lb(),d.Lb()),2&t){const t=d.Wb();d.zb(3),d.nc(" Tienes ",t.listMyCategories.length," categorias en t\xfa repositorio ")}}function u(t,i){if(1&t){const t=d.Nb();d.Mb(0,"ion-item-option",17),d.Ub("click",(function(){d.hc(t);const i=d.Wb().$implicit;return d.Wb().alterCategory(i)})),d.Kb(1,"ion-icon",18),d.Lb()}}function p(t,i){if(1&t){const t=d.Nb();d.Mb(0,"ion-item-option",19),d.Ub("click",(function(){d.hc(t);const i=d.Wb().$implicit;return d.Wb().permiss(i._id)})),d.Kb(1,"ion-icon",20),d.Lb()}}function m(t,i){if(1&t){const t=d.Nb();d.Mb(0,"ion-item-option",7),d.Ub("click",(function(){d.hc(t);const i=d.Wb().$implicit;return d.Wb().deletedCategorie(i._id)})),d.Kb(1,"ion-icon",21),d.Lb()}}const f=function(t){return["folders",t]};function y(t,i){if(1&t&&(d.Mb(0,"ion-item-sliding"),d.Mb(1,"ion-item",11),d.Kb(2,"ion-icon",12),d.Mb(3,"ion-label"),d.Mb(4,"strong"),d.lc(5),d.Lb(),d.Kb(6,"br"),d.Mb(7,"p"),d.lc(8),d.Lb(),d.Mb(9,"strong"),d.lc(10),d.Lb(),d.Kb(11,"br"),d.Lb(),d.Lb(),d.Mb(12,"ion-item-options",13),d.kc(13,u,2,0,"ion-item-option",14),d.kc(14,p,2,0,"ion-item-option",15),d.kc(15,m,2,0,"ion-item-option",16),d.Lb(),d.Lb()),2&t){const t=i.$implicit,e=d.Wb();d.zb(1),d.cc("routerLink",d.fc(7,f,t._id)),d.zb(4),d.mc(t.name),d.zb(3),d.mc(t.description),d.zb(2),d.nc("Creada el d\xeda ",t.dateCreated,""),d.zb(3),d.cc("ngIf",t.userID===e.userID),d.zb(1),d.cc("ngIf",t.userID===e.userID),d.zb(1),d.cc("ngIf",t.userID===e.userID)}}const h=[{path:"",component:(()=>{class t{constructor(t,i,e,o){this.modalCtrl=t,this.apiService=i,this.storage=e,this.alertCtrl=o,this.listMyCategories=[],this.userID=""}ngOnInit(){}ionViewWillEnter(){this.listCategories()}listCategories(){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this.storage.getLogin();if(console.log(t),t){const i="exter"===t[0].type?t[0].login:t[0].UserID;this.userID=i,this.apiService.getCategory(t[0].CompanyID,i).subscribe(t=>{console.log(t),t.status&&(this.listMyCategories=t.response)})}}))}alterCategory(t){return Object(c.a)(this,void 0,void 0,(function*(){const i=yield this.modalCtrl.create({component:l.a,componentProps:{type:"alter",categoryDatAlter:t,title:"Editar Categoria"}});yield i.present(),(yield i.onWillDismiss())&&this.listCategories()}))}deletedCategorie(t){return Object(c.a)(this,void 0,void 0,(function*(){const i=yield this.listData(t);if(i){const e=yield this.alertCtrl.create({header:"Esta seguro de eliminar esta categoria?",message:`Dentro de ella se encuentran ${i.files} archivos y  ${i.folder} carpetas.`,buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:()=>{this.apiService.deletedCategory(t).subscribe(i=>{i.status&&(this.listMyCategories=this.listMyCategories.filter(i=>i._id!==t))})}}]});return yield e.present()}}))}permiss(t){return Object(c.a)(this,void 0,void 0,(function*(){console.log("click");const i=this.listMyCategories.filter(i=>i._id===t),e=yield this.modalCtrl.create({component:l.a,componentProps:{type:"permiss",listPermiss:i[0].permiss,idCategory:t,title:"Administrar Permisos"}});yield e.present(),(yield e.onWillDismiss())&&this.listCategories()}))}listData(t){return new Promise((i,e)=>{this.apiService.getFolders(t,"").subscribe(t=>{"ok"===t.status?i({files:t.response.filter(t=>"file"===t.typeAction).length,folder:t.response.filter(t=>"folder"===t.typeAction).length}):e({error:t.err})})})}addCategory(){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:l.a,componentProps:{type:"category",title:"Crear Categoria"}});yield t.present();const i=yield t.onWillDismiss();i?(console.log(i,"OK"),i.data.st&&this.listCategories()):console.log("ERROR")}))}}return t.\u0275fac=function(i){return new(i||t)(d.Jb(r.Y),d.Jb(a.a),d.Jb(b.a),d.Jb(r.a))},t.\u0275cmp=d.Db({type:t,selectors:[["app-repository"]],decls:14,vars:2,consts:[["color","danger"],["slot","end"],[3,"click"],["name","reload","slot","icon-only"],["class","calc",4,"ngIf"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","danger",3,"click"],["name","add"],[1,"calc"],["color","light"],[3,"routerLink"],["name","folder","slot","start"],["side","end"],["color","medium",3,"click",4,"ngIf"],["color","warning",3,"click",4,"ngIf"],["color","danger",3,"click",4,"ngIf"],["color","medium",3,"click"],["name","pencil","slot","icon-only"],["color","warning",3,"click"],["name","key","slot","icon-only"],["name","trash","slot","icon-only"]],template:function(t,i){1&t&&(d.Mb(0,"ion-header"),d.Mb(1,"ion-toolbar",0),d.Mb(2,"ion-title"),d.lc(3,"Mi Repositorio"),d.Lb(),d.Mb(4,"ion-buttons",1),d.Mb(5,"ion-button",2),d.Ub("click",(function(){return i.listCategories()})),d.Kb(6,"ion-icon",3),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Mb(7,"ion-content"),d.Mb(8,"ion-list"),d.kc(9,g,4,1,"div",4),d.kc(10,y,16,9,"ion-item-sliding",5),d.Lb(),d.Mb(11,"ion-fab",6),d.Mb(12,"ion-fab-button",7),d.Ub("click",(function(){return i.addCategory()})),d.Kb(13,"ion-icon",8),d.Lb(),d.Lb(),d.Lb()),2&t&&(d.zb(9),d.cc("ngIf",i.listMyCategories.length>0),d.zb(1),d.cc("ngForOf",i.listMyCategories))},directives:[r.s,r.T,r.S,r.h,r.g,r.t,r.l,r.B,o.i,o.h,r.n,r.o,r.w,r.A,r.z,r.v,r.db,s.g,r.y,r.x],styles:["ion-item-sliding[_ngcontent-%COMP%]{touch-action:manipulation}"]}),t})()}];let C=(()=>{class t{}return t.\u0275mod=d.Hb({type:t}),t.\u0275inj=d.Gb({factory:function(i){return new(i||t)},imports:[[s.h.forChild(h)],s.h]}),t})();var M=e("iZCz");e.d(i,"RepositoryPageModule",(function(){return L}));let L=(()=>{class t{}return t.\u0275mod=d.Hb({type:t}),t.\u0275inj=d.Gb({factory:function(i){return new(i||t)},imports:[[o.b,n.a,r.U,M.a,C]]}),t})()}}]);