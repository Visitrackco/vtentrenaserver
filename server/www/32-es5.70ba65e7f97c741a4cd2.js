function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{n4yB:function(e,t,n){"use strict";n.r(t);var i=n("ofXK"),r=n("3Pt+"),o=n("TEn/"),s=n("tyNb"),a=n("mrSG"),c=n("Rwse"),l=n("J07l"),u=n("VOof"),b=n("fXoL");function f(e,t){if(1&e&&(b.Mb(0,"div",9),b.Mb(1,"ion-item-divider",10),b.Mb(2,"ion-label"),b.lc(3),b.Lb(),b.Lb(),b.Lb()),2&e){var n=b.Wb();b.zb(3),b.nc(" Tienes ",n.listMyCategories.length," categorias en t\xfa repositorio ")}}function p(e,t){if(1&e){var n=b.Nb();b.Mb(0,"ion-item-option",17),b.Ub("click",(function(){b.hc(n);var e=b.Wb().$implicit;return b.Wb().alterCategory(e)})),b.Kb(1,"ion-icon",18),b.Lb()}}function d(e,t){if(1&e){var n=b.Nb();b.Mb(0,"ion-item-option",19),b.Ub("click",(function(){b.hc(n);var e=b.Wb().$implicit;return b.Wb().permiss(e._id)})),b.Kb(1,"ion-icon",20),b.Lb()}}function g(e,t){if(1&e){var n=b.Nb();b.Mb(0,"ion-item-option",7),b.Ub("click",(function(){b.hc(n);var e=b.Wb().$implicit;return b.Wb().deletedCategorie(e._id)})),b.Kb(1,"ion-icon",21),b.Lb()}}var m=function(e){return["folders",e]};function h(e,t){if(1&e&&(b.Mb(0,"ion-item-sliding"),b.Mb(1,"ion-item",11),b.Kb(2,"ion-icon",12),b.Mb(3,"ion-label"),b.Mb(4,"strong"),b.lc(5),b.Lb(),b.Kb(6,"br"),b.Mb(7,"p"),b.lc(8),b.Lb(),b.Mb(9,"strong"),b.lc(10),b.Lb(),b.Kb(11,"br"),b.Lb(),b.Lb(),b.Mb(12,"ion-item-options",13),b.kc(13,p,2,0,"ion-item-option",14),b.kc(14,d,2,0,"ion-item-option",15),b.kc(15,g,2,0,"ion-item-option",16),b.Lb(),b.Lb()),2&e){var n=t.$implicit,i=b.Wb();b.zb(1),b.cc("routerLink",b.fc(7,m,n._id)),b.zb(4),b.mc(n.name),b.zb(3),b.mc(n.description),b.zb(2),b.nc("Creada el d\xeda ",n.dateCreated,""),b.zb(3),b.cc("ngIf",n.userID===i.userID),b.zb(1),b.cc("ngIf",n.userID===i.userID),b.zb(1),b.cc("ngIf",n.userID===i.userID)}}var v,y,C=[{path:"",component:(v=function(){function e(t,n,i,r){_classCallCheck(this,e),this.modalCtrl=t,this.apiService=n,this.storage=i,this.alertCtrl=r,this.listMyCategories=[],this.userID=""}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){this.listCategories()}},{key:"listCategories",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.getLogin();case 2:t=e.sent,console.log(t),t&&(n="exter"===t[0].type?t[0].login:t[0].UserID,this.userID=n,this.apiService.getCategory(t[0].CompanyID,n).subscribe((function(e){console.log(e),e.status&&(i.listMyCategories=e.response)})));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"alterCategory",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:c.a,componentProps:{type:"alter",categoryDatAlter:e,title:"Editar Categoria"}});case 2:return n=t.sent,t.next=5,n.present();case 5:return t.next=7,n.onWillDismiss();case 7:if(t.t0=t.sent,!t.t0){t.next=10;break}this.listCategories();case 10:case"end":return t.stop()}}),t,this)})))}},{key:"deletedCategorie",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.listData(e);case 2:if(!(n=t.sent)){t.next=10;break}return t.next=6,this.alertCtrl.create({header:"Esta seguro de eliminar esta categoria?",message:"Dentro de ella se encuentran ".concat(n.files," archivos y  ").concat(n.folder," carpetas."),buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:function(){r.apiService.deletedCategory(e).subscribe((function(t){t.status&&(r.listMyCategories=r.listMyCategories.filter((function(t){return t._id!==e})))}))}}]});case 6:return i=t.sent,t.next=9,i.present();case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"permiss",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("click"),n=this.listMyCategories.filter((function(t){return t._id===e})),t.next=4,this.modalCtrl.create({component:c.a,componentProps:{type:"permiss",listPermiss:n[0].permiss,idCategory:e,title:"Administrar Permisos"}});case 4:return i=t.sent,t.next=7,i.present();case 7:return t.next=9,i.onWillDismiss();case 9:if(t.t0=t.sent,!t.t0){t.next=12;break}this.listCategories();case 12:case"end":return t.stop()}}),t,this)})))}},{key:"listData",value:function(e){var t=this;return new Promise((function(n,i){t.apiService.getFolders(e,"").subscribe((function(e){"ok"===e.status?n({files:e.response.filter((function(e){return"file"===e.typeAction})).length,folder:e.response.filter((function(e){return"folder"===e.typeAction})).length}):i({error:e.err})}))}))}},{key:"addCategory",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:c.a,componentProps:{type:"category",title:"Crear Categoria"}});case 2:return t=e.sent,e.next=5,t.present();case 5:return e.next=7,t.onWillDismiss();case 7:(n=e.sent)?(console.log(n,"OK"),n.data.st&&this.listCategories()):console.log("ERROR");case 9:case"end":return e.stop()}}),e,this)})))}}]),e}(),v.\u0275fac=function(e){return new(e||v)(b.Jb(o.Y),b.Jb(l.a),b.Jb(u.a),b.Jb(o.a))},v.\u0275cmp=b.Db({type:v,selectors:[["app-repository"]],decls:14,vars:2,consts:[["color","danger"],["slot","end"],[3,"click"],["name","reload","slot","icon-only"],["class","calc",4,"ngIf"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","danger",3,"click"],["name","add"],[1,"calc"],["color","light"],[3,"routerLink"],["name","folder","slot","start"],["side","end"],["color","medium",3,"click",4,"ngIf"],["color","warning",3,"click",4,"ngIf"],["color","danger",3,"click",4,"ngIf"],["color","medium",3,"click"],["name","pencil","slot","icon-only"],["color","warning",3,"click"],["name","key","slot","icon-only"],["name","trash","slot","icon-only"]],template:function(e,t){1&e&&(b.Mb(0,"ion-header"),b.Mb(1,"ion-toolbar",0),b.Mb(2,"ion-title"),b.lc(3,"Mi Repositorio"),b.Lb(),b.Mb(4,"ion-buttons",1),b.Mb(5,"ion-button",2),b.Ub("click",(function(){return t.listCategories()})),b.Kb(6,"ion-icon",3),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(7,"ion-content"),b.Mb(8,"ion-list"),b.kc(9,f,4,1,"div",4),b.kc(10,h,16,9,"ion-item-sliding",5),b.Lb(),b.Mb(11,"ion-fab",6),b.Mb(12,"ion-fab-button",7),b.Ub("click",(function(){return t.addCategory()})),b.Kb(13,"ion-icon",8),b.Lb(),b.Lb(),b.Lb()),2&e&&(b.zb(9),b.cc("ngIf",t.listMyCategories.length>0),b.zb(1),b.cc("ngForOf",t.listMyCategories))},directives:[o.s,o.T,o.S,o.h,o.g,o.t,o.l,o.B,i.i,i.h,o.n,o.o,o.w,o.A,o.z,o.v,o.db,s.g,o.y,o.x],styles:["ion-item-sliding[_ngcontent-%COMP%]{touch-action:manipulation}"]}),v)}],k=((y=function e(){_classCallCheck(this,e)}).\u0275mod=b.Hb({type:y}),y.\u0275inj=b.Gb({factory:function(e){return new(e||y)},imports:[[s.h.forChild(C)],s.h]}),y),M=n("iZCz");n.d(t,"RepositoryPageModule",(function(){return x}));var w,x=((w=function e(){_classCallCheck(this,e)}).\u0275mod=b.Hb({type:w}),w.\u0275inj=b.Gb({factory:function(e){return new(e||w)},imports:[[i.b,r.a,o.U,M.a,k]]}),w)}}]);